<link rel="import" href="../../bower_components/polymer/polymer.html">
<link rel="import" href="../../bower_components/paper-shadow/paper-shadow.html">
<link rel="import" href="../../bower_components/core-tooltip/core-tooltip.html">

<polymer-element name="plakat-poster" attributes="heading desc img mobile">
	<template>
		<style>
			:host {
				display: block;
				cursor: pointer;
			}

			paper-shadow {
				border-radius: 1px;
			}

			#poster {
				border-radius: inherit;
				overflow: hidden;
			}

			#poster img {
				vertical-align: middle;
			}

			#content {
				padding: 16px;
				background-color: #fff;
			}

			#content h2 {
				margin: 0 0 8px 0;
				font-size: 24px;
			}
		</style>

		<template if="{{mobile}}">
			<style>
				:host {
					width: calc(50% - 8px);
				}

				#poster img {
					width: 100%;
					height: auto;
				}

				@media screen and (max-width: 420px) {
					:host {
						width: calc(100% - 8px);
					}
				}
			</style>
		</template>
		<paper-shadow>
			<div id="poster">
				<img src="http://baconmockup.com/400/320" width="{{width}}" height="320">
				<div id="content">
					<h2>{{heading}}</h2>
					<div id="desc">{{desc}}</div>
				</div>
			</div>
		</paper-shadow>
	</template>
	<script>
		Number.prototype.clamp = function(min, max) {
		 	return Math.min(Math.max(this, min), max);
		};

		Polymer('plakat-poster', {
			minLength: 0,
			maxLength: 500,
			minWidth: 220,
			maxWidth: 320,
			width: 320,

			ready: function() {
				var length = this.desc.length;
				var varLength = this.maxLength - this.minLength;
				var varWidth = this.maxWidth - this.minWidth;
				var lengthRatio = (length / varLength).clamp(0, 1);
				
				this.width = this.minWidth + varWidth * lengthRatio;	

				this.style.width = this.width + "px";
			}
		});
	</script>
</polymer-element>